<main class="main">
    <section class="section section--video-detail">
        <div class="column column_video">
            <gn-video-player [src]="(video$ | async)?.video_url"></gn-video-player>

            <section class="column__row">
                <h6>About this video:</h6>
                <p class="paragraph">{{ (video$ | async)?.description }}</p>
            </section>

            <div class="column__row video-stats">
                <div class="video-stats__group video-stats__group_views">
                    <img class="video-stats__icon" src="/assets/icons/view-circle.svg" alt="views">
                    <span class="video-stats__label">{{ (video$ | async)?.loop_count | fuzzy }} Views</span>
                </div>
                <div class="video-stats__group video-stats__group_likes">
                    <button class="video-stats__button" (click)="liked$.next(!liked$.getValue())" [disabled]="!(video$ | async)">
                        <img src="../../assets/icons/like.svg" alt="like" *ngIf="!(liked$ | async)">
                        <img src="../../assets/icons/liked.svg" alt="unlike" *ngIf="liked$ | async">
                    </button>

                    <span class="video-stats__label">{{ likeCount | fuzzy }}</span>
                </div>
            </div>

            <div class="column__row share-buttons">
                <button class="share-button share-button_facebook"></button>
                <button class="share-button share-button_twitter"></button>
                <button class="share-button share-button_google"></button>
            </div>

            <hr>

            <div class="column__row speaker__row">
                <img class="speaker-thumbnail" [src]="((video$ | async)?.speaker)?.picture_url" [alt]="((video$ | async)?.speaker)?.name">
                <div class="speaker__info">
                    <h6 class="speaker__name-header">{{ ((video$ | async)?.speaker)?.name }}</h6>
                    <div class="speaker__description-text">{{ ((video$ | async)?.speaker)?.description }}</div>
                    <button class="button speaker__follow-button">FOLLOW</button>
                </div>
            </div>
        </div>

        <!--<div class="column column_transcript">
            <gn-transcript [transcripts]="video$.pluck('transcripts')"></gn-transcript>
        </div>-->
    </section>

    <hr>

    <section class="section section_related-videos">

        <header class="section-header">
            <h1 class="section-header__title">Related Videos</h1>
        </header>

        <!-- By default, the router re-uses a component instance when it re-navigates to the same component type without visiting a different component first. -->
        <gn-video-panel-list [videos]="(video$ | async)?.related_videos?.records" [navigates]="true"></gn-video-panel-list>
    </section>
</main>
